#!/usr/bin/env python

from fltk import fl_rgb_color, FL_BLACK


def translate(ps):
    ps, pl = ps.strip().split("\n"), []
    for line in ps:
        pl.append([])
        for ind, char in enumerate(line):
            if char == "O":
                pl[-1].append(ind)
    return pl


def size(ps):
    ps = ps.strip().split("\n")
    return max(len(i) for i in ps), len(ps)


def paste(pat, pos, gs, cells):
    for ln, line in enumerate(translate(patterns[pat])):
        for cl in line:
            coord = pos + cl + (ln*gs)
            if cells[coord].color() != FL_BLACK:
                cells[coord].color(fl_rgb_color(80, 150, 0))
                cells[coord].state = True
                cells[coord].redraw()

patterns = {}

### GUNS ###

patterns["glidergun"] = '''
........................O
......................O.O
............OO......OO............OO
...........O...O....OO............OO
OO........O.....O...OO
OO........O...O.OO....O.O
..........O.....O.......O
...........O...O
............OO
'''

patterns["bigun"] = '''
...........O
..........OO
.........OO
..........OO..OO
......................................O
......................................OO........OO
.......................................OO.......OO
..........OO..OO..................OO..OO
OO.......OO
OO........OO
...........O
..................................OO..OO
.......................................OO
......................................OO
......................................O
'''

patterns["vacuum"] = '''
.OO.......................OO
.OO.......................O
........................O.O
...............OO.......OO
OO.............O.O
OO.............O.OO
................OO
................O
............................................OO
................O...........................OO
................OO
OO.............O.OO.............O...O
OO.............O.O.............O.....O.......OO
...............OO..............O.............OO
...............................OO...O
.OO..............................OOO
.OO
.................................OOO
...............................OO...O
...............................O.............OO
...............................O.....O.......OO
................................O...O

............................................OO
............................................OO




.....................................OO
.....................................O.O.......OO
.......................................O.......OO
.....................................OOO
......................O.O
.....................OOO
.....................OOO
.....................O...............OOO
.........................O.O...........O
.....................OO....O.........O.O
................OO....O...OO.........OO
...............O.O......O
...............O
..............OO
'''

### OSCILLATORS ###

patterns["104P177"] = '''
................O............O
.........OO........................OO
........OOO...OO..............OO...OOO
..............OO.OO........OO.OO
................O............O



..O........................................O
.OO........................................OO
.OO........................................OO



..OO......................................OO
..OO......................................OO
O...O....................................O...O
...O......................................O
...O......................................O








...O......................................O
...O......................................O
O...O....................................O...O
..OO......................................OO
..OO......................................OO



.OO........................................OO
.OO........................................OO
..O........................................O



................O............O
..............OO.OO........OO.OO
........OOO...OO..............OO...OOO
.........OO........................OO
................O............O
'''
